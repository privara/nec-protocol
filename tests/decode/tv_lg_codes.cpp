/*
 * Copyright (c) 2022 Jan Privara
 * SPDX-License-Identifier: MIT
 */

#include "CppUTest/TestHarness.h"
#include "CppUTestExt/MockSupport.h"

extern "C"
{
#include "nec_prot.h"
}

TEST_GROUP(TV_LG_Codes_19)
{
    static const int codes = 9;
    static const int code_samples = 68;

    uint32_t tv_lg_19_waveforms[codes][code_samples] = {
        {8999,4496,493,585,497,579,530,1668,493,579,497,579,535,546,491,584,497,579,497,1697,498,1705,487,584,497,1697,493,1705,493,1698,498,1697,493,1705,493,1698,498,579,530,546,535,541,535,1669,487,584,530,546,529,546,530,546,529,1669,493,1705,515,1676,515,562,524,1676,509,1683,493,1705,487,251005},
        {8992,4510,510,563,529,546,530,1669,493,579,530,546,529,546,530,551,530,546,529,1669,487,1705,493,579,535,1662,493,1705,493,1698,492,1705,526,1697,466,578,535,1669,509,563,529,546,530,1669,493,579,530,546,529,551,530,1690,466,584,529,1669,493,1697,498,579,530,1668,493,1705,487,1705,493,251000},
        {9028,4474,488,584,557,519,497,1697,498,584,491,579,497,584,491,584,491,584,497,1726,466,1704,493,579,557,1640,493,1698,498,1697,498,1698,498,1697,498,1705,487,1726,471,579,557,519,497,1697,498,579,497,579,497,579,497,584,497,579,519,1676,493,1705,493,579,562,1662,471,1697,493,1705,493,251006},
        {8999,4503,488,584,530,551,513,1683,487,585,557,519,551,530,513,491,563,584,524,1669,493,1705,493,584,491,1705,515,1683,487,1726,466,1704,493,1705,493,579,524,557,491,1705,548,524,497,1697,493,584,557,519,497,584,486,1705,493,1705,493,584,491,1705,487,590,491,1697,493,1705,493,1726,466,251006},
        {8985,4510,526,552,529,551,524,1676,487,585,546,530,551,524,551,524,551,530,524,1697,466,1704,515,557,551,1676,465,1705,515,1676,515,1683,515,1676,493,1733,487,557,524,1676,515,557,530,1697,487,557,530,546,551,530,524,551,524,1697,466,584,551,1647,488,584,530,1669,515,1676,520,1676,520,251006},
        {8971,4510,488,584,530,546,524,1676,509,563,524,551,530,546,529,546,530,546,529,1669,493,1705,515,557,530,1697,487,1676,520,1676,515,1683,515,1683,509,563,524,1676,509,1683,515,557,546,1655,509,563,546,530,524,551,524,1676,515,557,524,551,530,1669,515,562,524,1669,515,1683,515,1683,509,251007},
        {8992,4503,515,557,530,551,524,1669,515,562,551,524,524,551,530,546,529,551,546,1647,493,1705,515,557,551,1647,515,1676,526,1676,487,1705,504,1690,515,1683,487,1705,515,1683,509,563,546,1647,493,584,551,524,491,584,519,557,524,557,491,584,524,1676,487,585,491,1705,515,1704,466,1704,487,251006},
        {8999,4503,488,584,524,551,552,1647,488,584,530,546,529,546,530,546,529,551,524,1676,509,1683,487,585,551,1647,515,1683,487,1705,515,1676,515,1683,515,557,530,546,529,551,524,1697,487,1683,515,557,530,546,529,551,552,1640,520,1676,520,1683,487,579,530,551,524,1669,493,1733,487,1683,509,251005},
        {8971,4524,494,584,497,579,530,1668,493,579,535,546,491,584,530,546,529,546,497,1697,498,1705,487,585,529,1669,487,1705,493,1705,487,1705,493,1705,487,1705,493,579,535,546,491,1705,493,1705,493,579,524,551,535,541,535,541,535,1662,493,1733,466,579,497,579,535,1662,493,1705,493,1705,493,251006}
    };

    const uint16_t tv_lg_19_commands[codes] = {0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19};

    const uint16_t address = 0x04;
};

TEST(TV_LG_Codes_19, TV_LG_Codes_19)
{
    nec_decoded_data_t dec_res;

    nec_waveform_t waveform;
    waveform.length = code_samples;

    for (int i = 0; i < codes; i++) {
        waveform.samples = tv_lg_19_waveforms[i];

        nec_decode(&waveform, &dec_res);

        CHECK(dec_res.address == address);
        CHECK(dec_res.command == tv_lg_19_commands[i]);
    }
}
